"use strict";(self.webpackChunkpokedex=self.webpackChunkpokedex||[]).push([[505],{505:(e,o,s)=>{s.r(o),s.d(o,{default:()=>I});var t=s(7624),n=s(8418),r=s(8673),a=s(4460),l=s(1997),i=s(821),c=s(5426),d=s(4402),p=s(875),m=s.n(p),x=s(8447),g=s(6818),h=s.n(g);var u=s(8301),f=s.n(u);var y=s(8679),k=s(6409);const{persistAtom:w}=(0,k.J)(),j=(0,y.cn)({key:"searchQueriesState",default:{},effects:[w]});var b=s(8722),v=s(7363),Z=s(2298);const C=(0,i.lazy)((()=>Promise.all([s.e(494),s.e(758)]).then(s.bind(s,1758)))),S=(0,i.lazy)((()=>Promise.all([s.e(685),s.e(3)]).then(s.bind(s,4378)))),I=()=>{const{t:e}=(0,v.$G)(["common"]),o=(0,b.s0)(),s=(0,d.I0)(),p=(0,i.useRef)(null),[g,u]=(0,i.useState)(""),[k,w]=(0,i.useState)(""),[I,P]=(0,i.useState)(!1),[W,z]=(0,y.FV)(j),D=()=>{P(!0);(e=>new Promise((async(o,s)=>{try{const s=await x.Z.get(e);o(h()(s,["data"]))}catch(t){t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers)):t.request?console.log(t.request):console.log("Error",t.message),console.log(t.config),s(t)}})))("https://pokeapi.co/api/v2/pokemon/".concat(g.toLowerCase())).then((e=>{s({type:c.B0,payload:e}),P(!1),z((e=>({...e,[g.toLowerCase()]:g}))),o("/pokedex-react/pokemon/".concat(g.toLowerCase()))})).catch((o=>{s({type:c.YI,payload:"Oops! Something went wrong. Please try again later."}),w(e("common:errors.search-error")),P(!1)}))},{pokemonList:L,url:q,error:E,loading:A}=(0,d.v9)((e=>({pokemonList:e.pokedex.pokemonList,url:e.pokedex.url,error:e.pokedex.error,loading:e.pokedex.loading}))),O=(0,i.useCallback)((()=>{s({type:l.gz}),(e=>new Promise(((o,s)=>{e&&x.Z.get(e).then((e=>{const t=h()(e,["data","results"]),n=h()(e,["data","next"]),r=t.map((e=>{const o=h()(e,["url"]);return x.Z.get(o)}));Promise.all(r).then((e=>{const s=e.map((e=>h()(e,["data"])));o({data:s,url:n})})).catch((e=>s(e)))})).catch((e=>{e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config),s(e)}))})))(q).then((e=>{s({type:l.q4,payload:e})})).catch((e=>{s({type:l.y3,payload:"Oops! Something went wrong. Please try again later."})}))}),[q]);return(0,i.useEffect)((()=>{f()(L)&&O()}),[]),(0,Z.jsx)(i.Fragment,{children:(0,Z.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"column",flex:1,alignItems:"center"},children:[(0,Z.jsxs)(t.Z,{sx:{display:"flex",gap:"1rem",flexDirection:"column",alignItems:"center"},children:[(0,Z.jsx)(t.Z,{sx:{fontSize:{xs:"1.85rem",lg:"2.5rem"},maxWidth:"24ch",fontWeight:"bold",textAlign:"center"},children:"Enter a Pokemon name to view in detail"}),(0,Z.jsxs)(t.Z,{sx:{display:"flex",paddingX:"1rem",gap:"1rem",alignItems:"center",flexDirection:{xs:"column",lg:"row"}},ref:p,children:[(0,Z.jsxs)(t.Z,{sx:{display:"flex",gap:"1rem",alignItems:"center",position:"relative"},children:[(0,Z.jsx)(n.Z,{id:"searchField",placeholder:"Search",variant:"outlined",sx:{backgroundColor:"white",borderRadius:"5px",width:"20rem"},onChange:e=>{u(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),e.stopPropagation(),D())},value:g,error:!!k}),k&&(0,Z.jsx)(r.Z,{sx:{color:"red",position:"absolute",bottom:"-24px"},children:k})]}),(0,Z.jsx)(a.Z,{disabled:I||!g,type:"submit",variant:"contained",color:"primary",onClick:D,sx:{display:"flex"},children:"Submit"})]}),(0,Z.jsx)(t.Z,{sx:{display:"flex",padding:"1rem",gap:"1rem",alignItems:"center"},children:W&&(0,Z.jsxs)(t.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"column",gap:"1rem",maxWidth:{xs:"calc(100% - 2rem)",lg:"80rem"}},children:[(0,Z.jsx)(t.Z,{sx:{fontWeight:"semibold",maxWidth:{xs:"24ch",lg:"28ch"},textAlign:"center",fontSize:{xs:"1rem",lg:"1.25rem"}},children:"Click on of the previous searches to view it again in detail"}),(0,Z.jsx)(t.Z,{sx:{display:"flex",gap:".5rem",flexWrap:"wrap",justifyContent:"center"},children:Object.keys(W).map(((e,s)=>(0,Z.jsx)(a.Z,{variant:"contained",color:"success",onClick:()=>{o("/pokedex-react/pokemon/".concat(e))},sx:{display:"flex",maxWidth:"fit-content",padding:".5rem 1rem .25rem 1rem",color:"white",borderRadius:".5rem",alignItems:"center"},children:e},"".concat(e,"-").concat(s))))})]})})]}),(0,Z.jsx)(t.Z,{sx:{fontWeight:"semibold",marginTop:"2.5rem",maxWidth:{xs:"24ch",lg:"36ch"},textAlign:"center",fontSize:{xs:"1.25rem",lg:"1.75rem"}},children:"Or, scroll down to view all the Pokemons. Click any card to view it in detail."}),(0,Z.jsx)(C,{pokemons:L,loadItems:O,loading:A}),E&&!A&&(0,Z.jsx)(i.Suspense,{fallback:(0,Z.jsx)(t.Z,{paddingY:6,children:(0,Z.jsx)(m(),{})}),children:(0,Z.jsx)(S,{message:E})})]})})}}}]);
//# sourceMappingURL=505.24d8e06c.chunk.js.map